{% extends 'layout.html' %}

{% block title %}
    All Tasks
{% endblock %}

{% block content %}
    <h1>📋 All Tasks</h1>
    
    <div style="display: flex; gap: 20px; margin-bottom: 30px;">
        <div style="flex: 1; background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h2>✅ Completed Tasks ({{ completed_tasks|length }})</h2>
            {% for task in completed_tasks %}
                <div style="color: green; text-decoration: line-through; margin: 10px 0; padding: 8px; background: white; border-radius: 4px;">
                    ✓ <strong>{{ task.title }}</strong>
                    <br>
                    <small>
                        Goal: <a href="{% url 'goals:goal_detail' task.goal.id %}">{{ task.goal.title }}</a> |
                        Completed: {{ task.updated_at|date:"M d, Y" }}
                    </small>
                </div>
            {% empty %}
                <p>No completed tasks yet.</p>
            {% endfor %}
        </div>
        
        <div style="flex: 1; background: #fff3e0; padding: 15px; border-radius: 8px;">
            <h2>⏳ Pending Tasks ({{ pending_tasks|length }})</h2>
            {% for task in pending_tasks %}
                <div style="margin: 10px 0; padding: 8px; background: white; border-radius: 4px; border-left: 4px solid orange;">
                    ○ <a href="{% url 'goals:task_detail' task.id %}"><strong>{{ task.title }}</strong></a>
                    <br>
                    <small>
                        Goal: <a href="{% url 'goals:goal_detail' task.goal.id %}">{{ task.goal.title }}</a>
                        {% if task.due_date %}
                            | Due: 
                            <span style="{% if task.due_date < today %}color: red; font-weight: bold;{% endif %}">
                                {{ task.due_date|date:"M d, Y" }}
                                {% if task.due_date < today %} (OVERDUE!){% endif %}
                            </span>
                        {% endif %}
                    </small>
                </div>
            {% empty %}
                <p>No pending tasks. Great job!</p>
            {% endfor %}
        </div>
    </div>
    
    <a href="{% url 'goals:goal_list' %}">← Back to Goals</a>
{% endblock %}